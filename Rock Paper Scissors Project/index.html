<!DOCTYPE html>
<html>
  <head>
    <title>Rock Paper Scissors</title>
    <style>
      body {
        background-color: black;
        color: white;
        font-family: Arial;
      }
      .title {
        font-size: 30px;
        font-weight: bold;
      }
      .result {
        font-size: 20px;
        font-weight: bold;
      }
      .score {
        margin-top: 50px;
      }
      .move-icon {
        height: 50px;
      }
      .buttons {
        background-color: transparent;
        border: 3px solid white;
        border-color: white;
        height: 120px;
        width: 120px;
        border-radius: 60px;
        margin-right: 6px;
        cursor: pointer;
      }
      .reset-button,
      .auto-play-button {
        height: 40px;
        width: 120px;
        border: none;
        font-size: 15px;
        cursor: pointer;
        transition: opacity 0.15s;
      }
      .reset-button:hover {
        opacity: 0.8;
      }
      .auto-play-button:hover {
        opacity: 0.8;
      }
      .reset-button:active,
      .auto-play-button:active {
        opacity: 0.6;
      }
    </style>
  </head>
  <body>
    <p class="title">Rock Paper Scissors</p>
    <button 
      class="buttons"
      onclick="playGame('rock');"
    >
      <img src="rock-paper-scissors-images/rock-emoji.png" class="move-icon">
    </button>
    <button 
      class="buttons"
      onclick="playGame('paper');"
    >
      <img src="rock-paper-scissors-images/paper-emoji.png" class="move-icon">
    </button>
    <button 
      class="buttons"
      onclick="playGame('scissors');"
    >
     <img src="rock-paper-scissors-images/scissors-emoji.png" class="move-icon">
    </button>
    <p class="result"></p>
    <p class="moves"></p>
    <p class="score"></p>
    <button class="reset-button" onclick="resetScore();">Reset Score</button>
    <button class="auto-play-button">Auto Play</button>
    <script>
      let result;
      let score = JSON.parse(localStorage.getItem('score')) || {
        win: 0,
        loss: 0,
        tie: 0
      };
      const autoPlayButtonElement = document.querySelector('.auto-play-button');
      let isAutoPlay = false;
      autoPlayButtonElement.addEventListener('click', () => {
        if (!isAutoPlay) {
          autoPlay();
          isAutoPlay = true;
          autoPlayButtonElement.innerHTML = 'Cancel';
        } else {
          clearInterval(intervalId);
          isAutoPlay = false;
          autoPlayButtonElement.innerHTML = 'Auto Play';
        }
      });
      function playGame(playerMove){
        const computerMove = pickComputerMove();
        if (playerMove == 'rock'){
          if (computerMove == 'rock') {
            result = 'Tie.';
          } else if (computerMove == 'paper') {
            result = 'You lose.';
          } else if (computerMove == 'scissors') {
            result = 'You win.';
          }
        }
        if (playerMove == 'paper') {
          if (computerMove == 'rock') {
            result = 'You win.';
          } else if (computerMove == 'paper') {
            result = 'Tie.';
          } else if (computerMove == 'scissors') {
            result = 'You lose.';
          }
        }
        if (playerMove == 'scissors') {
          if (computerMove == 'rock') {
            result = 'You lose.';
          } else if (computerMove == 'paper') {
            result = 'You win.';
          } else if (computerMove == 'scissors') {
            result = 'Tie.';
          }
        }
        if (result == 'You win.') {
          score.win++;
        } else if (result == 'You lose.') {
          score.loss++;
        } else if (result == 'Tie.') {
          score.tie++;
        }

        localStorage.setItem('score', JSON.stringify(score));
        document.querySelector('.result').innerHTML = `${result}`;
        document.querySelector('.moves').innerHTML = `
          You 
          <img src = 'rock-paper-scissors-images/${playerMove}-emoji.png' class = 'move-icon'> 
          <img src = 'rock-paper-scissors-images/${computerMove}-emoji.png' class = 'move-icon'>
          Computer
        `;
        updateScore();
      }

        updateScore();

      function pickComputerMove(){
        let computerMove;
        let randomNum = Math.random();
        if (randomNum > 0 && randomNum <= 1/3) {
          computerMove = 'rock';
        } else if (randomNum > 1/3 && randomNum <= 2/3) {
          computerMove = 'paper';
        } else if (randomNum > 2/3 && randomNum <= 1) {
          computerMove = 'scissors';
        }
        return computerMove;
      }

      function autoPlay() {
        intervalId = setInterval(() => {
          const playerMove = pickComputerMove();
          playGame(playerMove);
        }, 1000);
      }

      function resetScore() {
        score.win = 0;
        score.loss = 0;
        score.tie = 0;
        localStorage.removeItem('score');
        document.querySelector('.result').innerHTML = 'You\'ve reset your score';
        document.querySelector('.moves').innerHTML = ``;
        updateScore();
      }

      function updateScore() {
        document.querySelector('.score').innerHTML = `Wins: ${score.win}  Losses: ${score.loss}  Ties: ${score.tie}`;
      }
    </script>
  </body>
</html>
